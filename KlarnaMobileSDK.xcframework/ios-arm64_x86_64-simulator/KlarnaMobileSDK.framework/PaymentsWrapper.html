<!doctype html><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/><meta http-equiv="Content-Security-Policy" content="object-src 'none'; base-uri 'none'; frame-ancestors 'none';"/><title>Payment View</title><script>/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),a=n(645),o=n.n(a)()(i());o.push([e.id,"* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    background-color: #fff;\n}\n\n#payment-container {\n    text-align: center;\n    vertical-align: text-top;\n    padding: \n        env(safe-area-inset-top, 20px)\n        env(safe-area-inset-right, 20px)\n        env(safe-area-inset-bottom, 20px)\n        env(safe-area-inset-left, 20px);\n}",""]);const s=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],d=r.base?l[0]+r.base:l[0],c=a[d]||0,u="".concat(d," ").concat(c);a[d]=c+1;var p=n(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var f=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),d=0;d<a.length;d++){var c=n(a[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},449:function(e,t,n){!function(e){"use strict";var t,n=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),r=n&&"a=1"===new n({a:1}).toString(),i=n&&"+"===new n("s=%2B").get("s"),a=n&&"size"in n.prototype,o="__URLSearchParams__",s=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),l=h.prototype,d=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&r&&i&&s&&a)){l.append=function(e,t){v(this[o],e,t)},l.delete=function(e){delete this[o][e]},l.get=function(e){var t=this[o];return this.has(e)?t[e][0]:null},l.getAll=function(e){var t=this[o];return this.has(e)?t[e].slice(0):[]},l.has=function(e){return b(this[o],e)},l.set=function(e,t){this[o][e]=[""+t]},l.toString=function(){var e,t,n,r,i=this[o],a=[];for(t in i)for(n=f(t),e=0,r=i[t];e<r.length;e++)a.push(n+"="+f(r[e]));return a.join("&")};var c,u=e.Proxy&&n&&(!i||!s||!r||!a);u?(c=new Proxy(n,{construct:function(e,t){return new e(new h(t[0]).toString())}})).toString=Function.prototype.toString.bind(h):c=h,Object.defineProperty(e,"URLSearchParams",{value:c});var p=e.URLSearchParams.prototype;p.polyfill=!0,!u&&e.Symbol&&(p[e.Symbol.toStringTag]="URLSearchParams"),"forEach"in p||(p.forEach=function(e,t){var n=y(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)}),"sort"in p||(p.sort=function(){var e,t,n,r=y(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var a=i[t],o=r[a];for(n=0;n<o.length;n++)this.append(a,o[n])}}),"keys"in p||(p.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),m(e)}),"values"in p||(p.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),m(e)}),"entries"in p||(p.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),m(e)}),d&&(p[e.Symbol.iterator]=p[e.Symbol.iterator]||p.entries),"size"in p||Object.defineProperty(p,"size",{get:function(){var e=y(this.toString());if(p===this)throw new TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(e).reduce((function(t,n){return t+e[n].length}),0)}})}function h(e){((e=e||"")instanceof URLSearchParams||e instanceof h)&&(e=e.toString()),this[o]=y(e)}function f(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function g(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function m(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d&&(n[e.Symbol.iterator]=function(){return n}),n}function y(e){var t={};if("object"==typeof e)if(_(e))for(var n=0;n<e.length;n++){var r=e[n];if(!_(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");v(t,r[0],r[1])}else for(var i in e)e.hasOwnProperty(i)&&v(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),o=0;o<a.length;o++){var s=a[o],l=s.indexOf("=");-1<l?v(t,g(s.slice(0,l)),g(s.slice(l+1))):s&&v(t,g(s),"")}}return t}function v(e,t,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);b(e,t)?e[t].push(r):e[t]=[r]}function _(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==n.g?n.g:"undefined"!=typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e;!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.None=4]="None"}(e||(e={}));var t,r=function(){function t(){this._logLevel=e.None,this._logDelegate=null}return Object.defineProperty(t.prototype,"level",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delegate",{get:function(){return this._logDelegate},set:function(e){this._logDelegate=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel===e.Debug&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.log.apply(console,t))},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel<=e.Info&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.info.apply(console,t))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel<=e.Warn&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.warn.apply(console,t))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel<=e.Error&&(null!=this._logDelegate&&this._logDelegate.logError(this._stringifyParams(t)),console.error.apply(console,t))},t.prototype._stringifyParams=function(e){try{return JSON.stringify(e,null,2)}catch(e){return"Couldn't stringify logging params."}},t.default=new t,t}(),i=function(){function e(){}return e.prototype.parseTokenV1=function(e){try{var t=e.split(".");if(t.length<2)return null;var n=t[1].replace("-","+").replace("_","/"),r=atob(n),i=JSON.parse(r);if(this._isKlarnaPaymentsToken(i))return i}catch(e){return null}return null},e.prototype._isKlarnaPaymentsToken=function(e){var t=e;return"string"==typeof t.client_event_base_url&&"string"==typeof t.environment&&"string"==typeof t.language&&"string"==typeof t.merchant_name&&"string"==typeof t.purchase_country&&"string"==typeof t.session_id&&"string"==typeof t.session_type},e}(),a=function(){function e(){}return e.randomString=function(e){void 0===e&&(e=10);for(var t="",n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t},e.capitalizeString=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.commaSplitString=function(e){return e.split(/[,]+[\s]*/)},e.createUUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.find=function(e,t,n){if(void 0!==Array.prototype.find)return e.find(t,n);if(!(null!==e&&e instanceof Array))throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=Object(e),i=r.length>>>0,a=0;a<i;a++){var o=r[a];if(t.call(n,o,a,r))return o}},e}();!function(e){e.PageLoad="PageLoad",e.SdkFound="SdkFound",e.SdkNotFound="SdkNotFound",e.MsgCtrlCreated="MsgCtrlCreated",e.PerformingAddMessageBridge="AddingMessageBridge",e.MessageBridgeAlreadyAdded="MessageBridgeAlreadyAdded",e.MessageBridgeAdded="MessageBridgeAdded",e.MessageBridgeLoadError="MessageBridgeLoadError",e.PerformedAddMessageBridge="PerformedAddMessageBridge",e.MsgCtrlInitializing="MsgCtrlInitializing",e.MsgCtrlInitCalledAddPaymentsLib="MsgCtrlInitCalledAddPaymentsLib",e.MsgCtrlInitCalledNativeAddMsgCallback="MsgCtrlInitCalledNativeAddMsgCallback",e.MsgCtrlInitCalledNativeAddReceiver="MsgCtrlInitCalledNativeAddReceiver",e.MsgCtrlInitCalledSendHandshake="MsgCtrlInitCalledSendHandshake",e.PerformingAddPaymentsLib="AddingPaymentsLib",e.PaymentsLibAlreadyAdded="PaymentsLibAlreadyAdded",e.PaymentsLibAdded="PaymentsLibAdded",e.PaymentsLibLoadError="PaymentsLibLoadError",e.PerformedAddPaymentsLib="PerformedAddPaymentsLib",e.RecvdInitialize="RecvdInitialize",e.ValidatedInitialize="ValidatedInitialize",e.PerformingInitialize="PerformingInitialize",e.PerformedInitialize="PerformedInitialize",e.SentInitializeResp="SentInitializeResp",e.InitializeException="InitializeException",e.RecvdLoad="RecvdLoad",e.ValidatedLoad="ValidatedLoad",e.PerformingLoad="PerformingLoad",e.PerformedLoad="PerformedLoad",e.GotLoadCallb="GotLoadCallb",e.SentLoadResp="SentLoadResp",e.LoadException="LoadException",e.RecvdLoadPaymentReview="RecvdLoadPaymentReview",e.ValidatedLoadPaymentReview="ValidatedLoadPaymentReview",e.PerformingLoadPaymentReview="PerformingLoadPaymentReview",e.PerformedLoadPaymentReview="PerformedLoadPaymentReview",e.GotLoadPaymentReviewCallb="GotLoadPaymentReviewCallb",e.SentLoadPaymentReviewResp="SentLoadPaymentReviewResp",e.LoadPaymentReviewException="LoadPaymentReviewException",e.RecvdAuthorize="RecvdAuthorize",e.ValidatedAuthorize="ValidatedAuthorize",e.PerformingAuthorize="PerformingAuthorize",e.PerformedAuthorize="PerformedAuthorize",e.GotAuthorizeCallb="GotAuthorizeCallb",e.SentAuthorizeResp="SentAuthorizeResp",e.AuthorizeException="AuthorizeException",e.RecvdReauthorize="RecvdReauthorize",e.ValidatedReauthorize="ValidatedReauthorize",e.PerformingReauthorize="PerformingReauthorize",e.PerformedReauthorize="PerformedReauthorize",e.GotReauthorizeCallb="GotReauthorizeCallb",e.SentReauthorizeResp="SentReauthorizeResp",e.ReauthorizeException="ReauthorizeException",e.RecvdFinalize="RecvdFinalize",e.ValidatedFinalize="ValidatedFinalize",e.PerformingFinalize="PerformingFinalize",e.PerformedFinalize="PerformedFinalize",e.GotFinalizeCallb="GotFinalizeCallb",e.SentFinalizeResp="SentFinalizeResp",e.FinalizeException="FinalizeException",e.WrapperError="WrapperError"}(t||(t={}));var o,s=function(){function e(){this.additionalParams=null,this.event="undefined",this.sid=a.createUUIDv4(),this.timestamp=Date.now()/1e3,this.wrapper={release:"wrapper-v2",version:"undefined",environment:"undefined"},this.device={os:"undefined",osVersion:"undefined",model:"undefined"},this.sdk={name:"undefined",version:"undefined",buildNumber:"undefined",sid:"undefined"},this.merchant={name:"undefined",packageName:"undefined",version:"undefined",buildNumber:"undefined"},this.kp={token:{environment:"undefined",language:"undefined",merchantName:"undefined",purchaseCountry:"undefined",sessionId:"undefined",sessionType:"undefined"},paymentMethodCategory:"undefined"},this.state={wrapper:{addedPaymentsLibrary:!1,gotAFatalError:!1},kp:{didInitialize:!1,didLoad:!1,didAuthorize:!1,didReauthorize:!1,didFinalize:!1}},this.additionalParams=null}return e.prototype.updateNativeParamsFromMessage=function(e){this.sdk.name=e.params.nativeName||"undefined",this.sdk.version=e.params.nativeVersion||"undefined",this.sdk.buildNumber=e.params.nativeBuildNumber||"undefined",this.sdk.sid=e.params.sid||"undefined",this.device.model=e.params.deviceName||"undefined",this.device.os=e.params.osName||"undefined",this.device.osVersion=e.params.osVersion||"undefined",this.merchant.name=e.params.merchantAppName||"undefined",this.merchant.packageName=e.params.merchantAppID||"undefined",this.merchant.version=e.params.merchantAppVersion||"undefined",this.merchant.buildNumber=e.params.merchantAppBuildNumber||"undefined"},e.prototype.updateKPParamsFromToken=function(e){this.kp.token.environment=e.environment,this.kp.token.language=e.language,this.kp.token.merchantName=e.merchant_name,this.kp.token.purchaseCountry=e.purchase_country,this.kp.token.sessionId=e.session_id,this.kp.token.sessionType=e.session_type},e.prototype.updatePaymentMethodCategories=function(e){this.kp.paymentMethodCategory=e},e.prototype.updateWithEvent=function(e,n){this.event=e,this.timestamp=Date.now()/1e3,this.additionalParams=n||null,e===t.PaymentsLibAdded?this.state.wrapper.addedPaymentsLibrary=!0:e===t.PerformedInitialize?this.state.kp.didInitialize=!0:e===t.GotLoadCallb?this.state.kp.didLoad=!0:e===t.GotAuthorizeCallb?this.state.kp.didAuthorize=!0:e===t.GotReauthorizeCallb?this.state.kp.didReauthorize=!0:e===t.GotFinalizeCallb&&(this.state.kp.didFinalize=!0)},e}(),l=function(){function e(e,t){this._wrapperVersion="v1.1.3-271afaae1d7",this._analyticsData=new s,this._analyticsData.wrapper.environment=e,this._analyticsData.wrapper.version=this._wrapperVersion,this._endpoint=t}return e.prototype.setSessionTokenString=function(e){var t=(new i).parseTokenV1(e);r.default.debug("Token parsed: ",null!=t),null!=t&&this._analyticsData.updateKPParamsFromToken(t)},e.prototype.setHandshakeMessage=function(e){this._analyticsData.updateNativeParamsFromMessage(e)},e.prototype.setPaymentMethodCategories=function(e){this._analyticsData.updatePaymentMethodCategories(e)},e.prototype.reportEvent=function(e,t){if(this._analyticsData.updateWithEvent(e,t),"SHEIN"===this._analyticsData.merchant.name||"com.zzkko"===this._analyticsData.merchant.packageName||"zzkko.com.ZZKKO"===this._analyticsData.merchant.packageName){var n=JSON.stringify(this._analyticsData);this._sendEvent(e,n)}},e.prototype._sendEvent=function(e,t){r.default.debug("Sending event: "+e);var n="https://".concat(this._endpoint.analyticsHost)+"/v1/in-app/kpwrapper-web-"+(this._wrapperVersion.startsWith("v")?this._wrapperVersion.includes("-")?this._wrapperVersion.split("-")[0]:this._wrapperVersion:"undefined")+"/"+e;setTimeout((function(){window.fetch&&fetch(n,{method:"POST",body:t,mode:"no-cors"})}),0)},e}(),d=function(e,t,n){void 0===n&&(n={}),this.action=e,this.sender=t,this.receiver="Native",this.params=n,this.messageId=a.randomString()},c=function(){function e(e,t,n,r,i){this.isPublic=!1,this.isFatal=!1,this.name=e,this.message=t,this.fields=n,this.showForm=r,this.action=i}return e.prototype.toParams=function(){var e={actionType:"errorResponse"};return e.error=this.name,e.message=this.message,e.isPublic=1==this.isPublic?"true":"false",e.isFatal=1==this.isFatal?"true":"false",null!=this.fields&&(e.fields=JSON.stringify(this.fields)),null!=this.showForm&&(e.showForm=1==this.showForm?"true":"false"),null!=this.action&&(e.action=this.action),e},e}(),u=function(){function e(){}return e.UnrecognizedAction=new c("UnrecognizedActionError","Couldn't recognize the action sent to us."),e.NotMockingKp=new c("NotWrappingKpError","Got a KP action despite not wrapping it."),e.LibraryNotAdded=new c("PaymentsLibyNotAddedError","Got message to Payments Library, but it hasn't been added yet."),e.ParseBase64Failed=new c("ParsingBase64Error","Error parsing base 64 from message."),e.ParseStringFailed=new c("ParseStringFailed","Error parsing string from message."),e.AddingPaymentsLibFailed=new c("AddPaymentsLibError","Error adding Payments Library."),e.PaymentsLibInitFailed=new c("PaymentsLibInitError","Error performing Klarna.Payments.init()."),e.PaymentsLibLoadFailed=new c("PaymentsLibLoadError","Error performing Klarna.Payments.load()."),e.PaymentsLibLoadPaymentReviewFailed=new c("PaymentsLibLoadPaymentReviewError","Error performing Klarna.Payments.loadPaymentReview()."),e.PaymentsLibAuthorizeFailed=new c("PaymentsLibAuthorizeError","Error performing Klarna.Payments.authorize()."),e.PaymentsLibReauthorizeFailed=new c("PaymentsLibReauthorizeError","Error performing Klarna.Payments.reauthorize()."),e.PaymentsLibFinalizeFailed=new c("PaymentsLibFinalizeError","Error performing Klarna.Payments.finalize()."),e}(),p=function(){function e(e,t,n,r,i){this._libraryAdded=!1,this._asyncCallbackTriggered=!1,this._customLibraryUrl=null,this._customLibraryVersion=null,this._customAppVersion=null,this._customLibraryUrl=e,this._customLibraryVersion=t,this._customAppVersion=n,this._endpoint=r,this._analyticsController=i,window.klarnaAsyncCallback=this.asyncCallbackTriggered.bind(this)}return Object.defineProperty(e.prototype,"libraryAdded",{get:function(){return this._libraryAdded},enumerable:!1,configurable:!0}),e.prototype.asyncCallbackTriggered=function(){this._asyncCallbackTriggered=!0,r.default.warn("Async callback triggered."),r.default.warn(JSON.stringify(this,null,2)),null!=this._asyncCallbackInitializeBlock&&(this._asyncCallbackInitializeBlock(),this._asyncCallbackInitializeBlock=void 0)},e.prototype.addPaymentsLibrary=function(e,n,i){var a=this;r.default.debug("Adding Klarna Payments Library into page head."),this._logAnalyticsEvt(t.PerformingAddPaymentsLib);var o="PaymentsLibraryScript";if(null!=document.getElementById(o))return r.default.warn("Payments Library already added to page. Won't add it again."),this._logAnalyticsEvt(t.PaymentsLibAlreadyAdded),void i(!1);r.default.debug("Creating script element for Payments Library as #".concat(o,"."));var s=document.createElement("script");s.src=this._customLibraryUrl||"https://".concat(this._endpoint.assetsHost,"/kp/lib/").concat(this._customLibraryVersion||"v1","/api.js?cb=").concat(Date.now()),s.async=!1,s.addEventListener("load",(function(){a._libraryAdded=!0,r.default.debug("Payments Library added."),a._logAnalyticsEvt(t.PaymentsLibAdded),i(!0)})),s.addEventListener("error",(function(o){r.default.error("Error adding Payments Lib.",o),a._logAnalyticsEvt(t.PaymentsLibLoadError);var s=u.AddingPaymentsLibFailed;e.sendError(s,n),i(!1)})),s.id=o,document.head.appendChild(s),this._logAnalyticsEvt(t.PerformedAddPaymentsLib)},e.prototype.performInitialize=function(e,n,i){var a=this;if(!this._asyncCallbackTriggered)return r.default.warn("Async callback not triggered, postponing initialize."),void(this._asyncCallbackInitializeBlock=function(){r.default.warn("Async callback triggered, performing initialize."),a.performInitialize(e,n,i)});r.default.debug("Performing Klarna.Payments.init()."),this._logAnalyticsEvt(t.PerformingInitialize);try{null!=this._customAppVersion&&(window.Klarna.Payments.__APP_VERSION__=this._customAppVersion),window.Klarna.Payments.init(e),this._logAnalyticsEvt(t.PerformedInitialize);var o=new d("actionToNative",n.componentName);o.params.actionType="initializeResponse",i.sendMessage(o,null),this._logAnalyticsEvt(t.SentInitializeResp)}catch(e){r.default.error("Error performing Klarna.Payments.init().",e),this._logAnalyticsEvt(t.InitializeException,{error:JSON.stringify(e)});var s=u.PaymentsLibInitFailed;s.action="Initialize",s.name=e.name||s.name,s.isPublic=!0,n.sendError(s,i)}},e.prototype.performLoad=function(e,n,i,a){var o=this;r.default.debug("Performing Klarna.Payments.load()."),this._logAnalyticsEvt(t.PerformingLoad);try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.load(e,n,(function(e){if(!e.show_form){var n=new Error("Show form set to false.");return n.name="ShowFormFalseError",void o.logLoadError(n,i,a,!0)}o._logAnalyticsEvt(t.GotLoadCallb,{showForm:e.show_form.toString(),error:e.error?JSON.stringify(e.error):""});var r=new d("actionToNative",i.componentName);r.params.actionType="loadResponse",o._addPaymentsLibResultToMessage(e,r),a.sendMessage(r,null),o._logAnalyticsEvt(t.SentLoadResp)})),this._logAnalyticsEvt(t.PerformedLoad)}catch(e){this.logLoadError(e,i,a)}},e.prototype.logLoadError=function(e,n,i,a){void 0===a&&(a=!1),r.default.error("Error performing Klarna.Payments.load().",e),this._logAnalyticsEvt(t.LoadException,{error:JSON.stringify(e)});var o=u.PaymentsLibLoadFailed;o.action="Load",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=a,n.sendError(o,i)},e.prototype.performLoadPaymentReview=function(e,n,i){var a=this;r.default.debug("Performing Klarna.Payments.loadPaymentReview()."),this._logAnalyticsEvt(t.PerformingLoadPaymentReview);try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.loadPaymentReview(e,(function(e){a._logAnalyticsEvt(t.GotLoadPaymentReviewCallb,{showForm:e.show_form.toString()});var r=new d("actionToNative",n.componentName);r.params.actionType="loadPaymentReviewResponse",a._addPaymentsLibResultToMessage(e,r),i.sendMessage(r,null),a._logAnalyticsEvt(t.SentLoadPaymentReviewResp)})),this._logAnalyticsEvt(t.PerformedLoadPaymentReview)}catch(e){r.default.error("Error performing Klarna.Payments.loadPaymentReview().",e),this._logAnalyticsEvt(t.LoadPaymentReviewException,{error:JSON.stringify(e)});var o=u.PaymentsLibLoadPaymentReviewFailed;o.action="LoadPaymentReview",o.name=e.name||o.name,o.isPublic=!0,n.sendError(o,i)}},e.prototype.performAuthorize=function(e,n,i,a){var o=this;r.default.debug("Performing Klarna.Payments.authorize()."),this._logAnalyticsEvt(t.PerformingAuthorize);try{window.Klarna.Payments.authorize(e,n,(function(e){if(!e.show_form){var n=new Error("Show form set to false.");return n.name="ShowFormFalseError",void o.logAuthError(n,i,a,!0)}o._logAnalyticsEvt(t.GotAuthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved.toString(),error:e.error?JSON.stringify(e.error):"",finalizeRequired:e.finalize_required?e.finalize_required.toString():"undefined"});var r=new d("actionToNative",i.componentName);r.params.actionType="authorizeResponse",o._addPaymentsLibResultToMessage(e,r),a.sendMessage(r,null),o._logAnalyticsEvt(t.SentAuthorizeResp)})),this._logAnalyticsEvt(t.PerformedAuthorize)}catch(e){this.logAuthError(e,i,a)}},e.prototype.logAuthError=function(e,n,i,a){void 0===a&&(a=!1),r.default.error("Error performing Klarna.Payments.authorize().",e),this._logAnalyticsEvt(t.AuthorizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibAuthorizeFailed;o.action="Authorize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=a,n.sendError(o,i)},e.prototype.performReauthorize=function(e,n,i,a){var o=this;r.default.debug("Performing Klarna.Payments.reauthorize()."),this._logAnalyticsEvt(t.PerformingReauthorize);try{window.Klarna.Payments.reauthorize(e,n,(function(e){if(!e.show_form){var n=new Error("Show form set to false.");return n.name="ShowFormFalseError",void o.logReauthError(n,i,a,!0)}o._logAnalyticsEvt(t.GotReauthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved.toString(),error:e.error?JSON.stringify(e.error):""});var r=new d("actionToNative",i.componentName);r.params.actionType="reauthorizeResponse",o._addPaymentsLibResultToMessage(e,r),a.sendMessage(r,null),o._logAnalyticsEvt(t.SentReauthorizeResp)})),this._logAnalyticsEvt(t.PerformedReauthorize)}catch(e){this.logReauthError(e,i,a)}},e.prototype.logReauthError=function(e,n,i,a){void 0===a&&(a=!1),r.default.error("Error performing Klarna.Payments.reauthorize().",e),this._logAnalyticsEvt(t.ReauthorizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibReauthorizeFailed;o.action="Reauthorize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=a,n.sendError(o,i)},e.prototype.performFinalize=function(e,n,i,a){var o=this;r.default.debug("Performing Klarna.Payments.finalize()."),this._logAnalyticsEvt(t.PerformedFinalize);try{window.Klarna.Payments.finalize(e,n,(function(e){if(!e.show_form){var n=new Error("Show form set to false.");return n.name="ShowFormFalseError",void o.logFinalizeError(n,i,a,!0)}o._logAnalyticsEvt(t.GotFinalizeCallb,{showForm:e.show_form.toString(),approved:e.approved.toString(),error:e.error?JSON.stringify(e.error):""});var r=new d("actionToNative",i.componentName);r.params.actionType="finalizeResponse",o._addPaymentsLibResultToMessage(e,r),a.sendMessage(r,null),o._logAnalyticsEvt(t.SentFinalizeResp)})),this._logAnalyticsEvt(t.PerformedFinalize)}catch(e){this.logFinalizeError(e,i,a)}},e.prototype.logFinalizeError=function(e,n,i,a){void 0===a&&(a=!1),r.default.error("Error performing Klarna.Payments.finalize().",e),this._logAnalyticsEvt(t.FinalizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibFinalizeFailed;o.action="Finalize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=a,n.sendError(o,i)},e.prototype._addPaymentsLibResultToMessage=function(e,t){for(var n in e)if(e.hasOwnProperty(n))if("show_form"===n)t.params.showForm=e[n].toString();else if("error"===n)for(var i in e[n])"invalid_fields"===i?t.params.invalidFields=JSON.stringify(e[n][i],null,2):r.default.warn("Got unrecognized field in error from Payments Library: ".concat(i,". Will not forward it to the SDK."));else"authorization_token"===n?(t.params.authToken=e[n].toString(),t.params.authorizationToken=e[n].toString()):"approved"===n?t.params.approved=e[n].toString():"finalize_required"===n?t.params.finalizeRequired=e[n].toString():r.default.warn("Got unrecognized field from Payments Library: ".concat(n,". Will not forward it to the SDK."))},e.prototype._logAnalyticsEvt=function(e,t){null!=this._analyticsController&&this._analyticsController.reportEvent(e,t)},e}(),h=function(){function e(){}return e.prototype.parseUtf8Base64=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e}();!function(e){e[e.AsString=0]="AsString",e[e.AsStringAry=1]="AsStringAry",e[e.AsBoolean=2]="AsBoolean",e[e.Base64EncodedObj=3]="Base64EncodedObj"}(o||(o={}));var f=function(){function e(e,n,r){this._errors=[],this._messages=[],this._mockKpMethods=e,this._componentName=(this._mockKpMethods,"KlarnaPaymentsWrapper"),this._analyticsController=r,this._storeErrorsAndMessages=n,this._logAnalyticsEvt(t.MsgCtrlCreated,{MockKpMethods:e.toString(),ComponentName:this._componentName})}return Object.defineProperty(e.prototype,"mocksKpClientMethods",{get:function(){return this._mockKpMethods},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return this._componentName},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e,n){var i=this;r.default.debug("Initializing MessageController."),this._logAnalyticsEvt(t.MsgCtrlInitializing),this._logAnalyticsEvt(t.MsgCtrlInitCalledAddPaymentsLib),n.addPaymentsLibrary(this,e,(function(){e.addMessageCallback((function(e,t){i._receivedMessage(e,t,n)})),i._logAnalyticsEvt(t.MsgCtrlInitCalledNativeAddMsgCallback),e.addAsReceiver(i._componentName),i._logAnalyticsEvt(t.MsgCtrlInitCalledNativeAddReceiver),e.sendHandshake((function(e){null!=i._analyticsController&&null!=e&&i._analyticsController.setHandshakeMessage(e)})),i._logAnalyticsEvt(t.MsgCtrlInitCalledSendHandshake),i._initializeResizeObserver(e)}))},e.prototype._initializeResizeObserver=function(e){if(window.ResizeObserver){var t=document.querySelector("#payment-container"),n=new ResizeObserver((function(t){for(var n=0,i=t;n<i.length;n++){var a=i[n];if(r.default.debug("New dimensions found: ",a),a.contentRect){var o=a.contentRect.height;o<5e3&&e.sendResizeEvent(o)}}r.default.debug("Container size changed")}));null!=t&&n.observe(t),r.default.debug("Resize observer initialized")}else r.default.debug("ResizeObserver not supported"),document.addEventListener("resize",(function(){var t=document.querySelector("#payment-container");if(null!=t){var n=t.scrollHeight;n<5e3&&e.sendResizeEvent(n)}}))},e.prototype.sendError=function(e,n){this._logAnalyticsEvt(t.WrapperError,{error:e.name,message:e.message}),this._storeErrorsAndMessages&&this._errors.push(e),n.sendMessage(new d("actionToNative",this._componentName,e.toParams()),null)},e.prototype._receivedMessage=function(e,n,i){this._storeErrorsAndMessages&&this._messages.push(e);var o=null!=a.find(["initialize","load","loadPaymentReview","authorize","reauthorize","finalize"],(function(t){return t===e.params.actionType}));if(o&&!i.libraryAdded)return r.default.error("Received a message to forward to Payments Library, but it's not loaded."),void this.sendError(u.LibraryNotAdded,n);if(o&&!this._mockKpMethods)return r.default.error("Received a message wrapper should mock, but wrapper is not mocking KP."),void this.sendError(u.NotMockingKp,n);if(o&&this._mockKpMethods){var s=e.params.actionType;"initialize"===s?(this._logAnalyticsEvt(t.RecvdInitialize),this._handleBridgeInitialize(e,n,i)):"load"===s?(this._logAnalyticsEvt(t.RecvdLoad),this._handleBridgeLoad(e,n,i)):"loadPaymentReview"===s?(this._logAnalyticsEvt(t.RecvdLoadPaymentReview),this._handleBridgeLoadPaymentReview(e,n,i)):"authorize"===s?(this._logAnalyticsEvt(t.RecvdAuthorize),this._handleBridgeAuthorize(e,n,i)):"reauthorize"===s?(this._logAnalyticsEvt(t.RecvdReauthorize),this._handleBridgeReauthorize(e,n,i)):"finalize"===s?(this._logAnalyticsEvt(t.RecvdFinalize),this._handleBridgeFinalize(e,n,i)):this.sendError(u.UnrecognizedAction,n)}},e.prototype._handleBridgeInitialize=function(e,n,i){if(r.default.debug("Handling mock init."),this._validateRequiredParam(e,n,"clientToken",o.AsString,!1)&&(null!=this._analyticsController&&this._analyticsController.setSessionTokenString(e.params.clientToken),this._validateRequiredParam(e,n,"returnUrl",o.AsString,!1))){this._logAnalyticsEvt(t.ValidatedInitialize);var a={client_token:e.params.clientToken};i.performInitialize(a,this,n)}},e.prototype._handleBridgeLoad=function(e,n,i){if(r.default.debug("Handling mock load."),this._validateRequiredParam(e,n,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,n,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,n,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedLoad);var s=a.commaSplitString(e.params.paymentMethodCategories);null!=this._analyticsController&&this._analyticsController.setPaymentMethodCategories(e.params.paymentMethodCategories);var l={container:"#payment-container",instance_id:"some-hardcoded-instance-id",payment_method_categories:s},d=this._extractString(e,n,"sessionDataString");null===d&&(d=this._extractBase64(e,n,"sessionData")),i.performLoad(l,d,this,n)}},e.prototype._handleBridgeLoadPaymentReview=function(e,n,i){r.default.debug("Handling mock load payment review."),this._logAnalyticsEvt(t.ValidatedLoadPaymentReview),i.performLoadPaymentReview({container:"#payment-container"},this,n)},e.prototype._handleBridgeAuthorize=function(e,n,i){if(r.default.debug("Handling mock auth."),this._validateRequiredParam(e,n,"autoFinalize",o.AsBoolean,!0)&&this._validateRequiredParam(e,n,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,n,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,n,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedAuthorize);var a={instance_id:"some-hardcoded-instance-id"};null!=e.params.autoFinalize?a.auto_finalize="true"===e.params.autoFinalize:r.default.debug("autoFinalize is null.");var s=this._extractString(e,n,"sessionDataString");null===s&&(s=this._extractBase64(e,n,"sessionData")),i.performAuthorize(a,s,this,n)}},e.prototype._handleBridgeReauthorize=function(e,n,i){if(r.default.debug("Handling mock reauth."),this._validateRequiredParam(e,n,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,n,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,n,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedReauthorize);var s={instance_id:"some-hardcoded-instance-id",payment_method_categories:a.commaSplitString(e.params.paymentMethodCategories)},l=this._extractString(e,n,"sessionDataString");null===l&&(l=this._extractBase64(e,n,"sessionData")),i.performReauthorize(s,l,this,n)}},e.prototype._handleBridgeFinalize=function(e,n,i){if(r.default.debug("Handling mock finalize."),this._validateRequiredParam(e,n,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,n,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,n,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedFinalize);var s={instance_id:"some-hardcoded-instance-id",payment_method_categories:a.commaSplitString(e.params.paymentMethodCategories)},l=this._extractString(e,n,"sessionDataString");null===l&&(l=this._extractBase64(e,n,"sessionData")),i.performFinalize(s,l,this,n)}},e.prototype._extractString=function(e,t,n){try{if(null==e.params[n])return null;var i=e.params[n];return JSON.parse(i)}catch(e){return r.default.error("Error parsing string from message for field ".concat(n,".")),this.sendError(u.ParseStringFailed,t),null}},e.prototype._extractBase64=function(e,t,n){if(null==e.params[n]||"null"===e.params[n])return null;try{var i=e.params[n],a=(new h).parseUtf8Base64(i);return JSON.parse(a)}catch(e){return r.default.error("Error parsing base64 from message for field ".concat(n,".")),this.sendError(u.ParseBase64Failed,t),null}},e.prototype._validateRequiredParam=function(e,t,n,r,i){if(void 0===e.params[n]){if(i)return!0;var s=new c(a.capitalizeString(n)+"UndefinedError","Param "+n+" is undefined.");return this.sendError(s,t),!1}if(null===e.params[n]){if(i)return!0;var l=new c(a.capitalizeString(n)+"NullError","Param "+n+" is null.");return this.sendError(l,t),!1}if(r===o.AsString){if(0==(m=e.params[n]).length){var d=new c("MissingParamError","Param can't be an empty or blank string for "+n+".");return this.sendError(d,t),!1}}else if(r===o.AsStringAry){var u=a.commaSplitString(e.params[n]);if(0==u.length){var p=new c("MissingParamsError","At least one param needs to be provided for "+n+".");return this.sendError(p,t),!1}for(var h=0,f=u;h<f.length;h++)if(0==(m=f[h]).length){var g=new c("EmptyParamError","At least one of the params is an an empty space or a blank string for "+n+".");return this.sendError(g,t),!1}}else if(r==o.AsBoolean){var m;if("true"!==(m=e.params[n])&&"false"!==m){var y=new c("InvalidBoolValueError","Param "+n+" should be encoded as either a string with `true` or `false`.");return this.sendError(y,t),!1}}return!0},e.prototype._logAnalyticsEvt=function(e,t){null!=this._analyticsController&&this._analyticsController.reportEvent(e,t)},e}(),g=function(){function e(e,t){this.reqAction=e,this.resAction=t}return e.ResponseForAction=function(t){var n=a.find(e.PredefinedActions,(function(e){return e.reqAction===t}));return null!=n?n.resAction:null},e.HasResponse=function(e){return null!=this.ResponseForAction(e)},e.PredefinedActions=[new e("handshake","handshakeResponse"),new e("putData","putDataResponse"),new e("getData","getDataResponse"),new e("heightChanged",null),new e("httpRequest","httpResponse"),new e("fullScreenReplaceWebView","fullScreenReplaceWebViewResponse"),new e("fullscreenMoveWebView","fullscreenMoveWebViewResponse"),new e("fullscreenReplaceOverlay","fullscreenReplaceOverlayResponse"),new e("fullscreenRestoreWebView","fullscreenRestoreWebViewResponse"),new e("fullscreenLoadUrl",null),new e("fullscreenLoadHtml",null),new e("fullscreenShow","fullscreenShowResponse"),new e("fullscreenHide","fullscreenHideResponse"),new e("focusScroll",null),new e("showInternalBrowser","showInternalBrowserResponse"),new e("hideInternalBrowser","hideInternalBrowserResponse"),new e("openExternalBrowser",null),new e("testExternalApp","testExternalAppResponse"),new e("openExternalApp","openExternalAppResponse"),new e("toggleLogging",null),new e("logMessage",null)],e}(),m=function(){function e(){var e=this;this._receiverName=null,this._receivedMessages=[],this._sentMessages=[],this._allMessages=[],this._callbacks=[],this._storeAllMessages=!1,this._messageHandler=function(t){r.default.debug("Received message: \n"+JSON.stringify(t,null,2)),e._receivedMessages.push(t),e._storeAllMessages&&e._allMessages.push(t),e._notifyCallbacks(t)}}return Object.defineProperty(e.prototype,"storeAllMessages",{get:function(){return this._storeAllMessages},set:function(e){this._storeAllMessages=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"receiverName",{get:function(){return this._receiverName},enumerable:!1,configurable:!0}),e.prototype.addAsReceiver=function(e){null!=this._receiverName&&r.default.warn("Attempting to re-add as receiver ".concat(e,".")),r.default.debug("Adding as receiver: ".concat(e,".")),window.__KlarnaNativeHook.addReceiver(e,this._messageHandler),this._receiverName=e},e.prototype.removeAsReceiver=function(){window.__KlarnaNativeHook.removeReceiver(this._receiverName,this._messageHandler),this._receiverName=null},e.prototype.sendMessage=function(e,t){var n=this;this._storeAllMessages&&(this._sentMessages.push(e),this._allMessages.push(e)),r.default.debug("Sending message: \n"+JSON.stringify(e,null,2)),window.__KlarnaNativeHook.postMessage(e);var i=g.ResponseForAction(e.action);if(null!=t)if(null!=i)var o=window.setInterval((function(){var r=a.find(n._receivedMessages,(function(t){return t.action===i&&t.messageId===e.messageId}));null!=r&&(t(r),window.clearInterval(o))}),100);else t(null)},e.prototype.sendResizeEvent=function(e){if(null!=this._receiverName){var t=new d("heightChanged",this._receiverName);t.params.height=e.toString(),this.sendMessage(t,null)}},e.prototype.sendHandshake=function(e){if(null!=this._receiverName){var t=new d("handshake",this._receiverName);this.sendMessage(t,e)}else e(null)},e.prototype._notifyCallbacks=function(e){var t=this;this._callbacks.forEach((function(n){n(e,t)}))},e.prototype.addMessageCallback=function(e){this._callbacks.push(e)},e.prototype.removeMessageCallback=function(e){this._callbacks=this._callbacks.filter((function(t){return t!==e}))},e}(),y=n(379),v=n.n(y),_=n(795),b=n.n(_),P=n(569),w=n.n(P),E=n(565),A=n.n(E),z=n(216),R=n.n(z),S=n(589),L=n.n(S),k=n(424),M={};M.styleTagTransform=L(),M.setAttributes=A(),M.insert=w().bind(null,"head"),M.domAPI=b(),M.insertStyleElement=R(),v()(k.Z,M),k.Z&&k.Z.locals&&k.Z.locals,n(449);var C=function(){function e(){this._searchParams=new URLSearchParams(location.search)}return e.prototype.getBoolean=function(e,t){var n=this._searchParams.get(e);return null!=n?"true"===n:t},e.prototype.getString=function(e){return this._searchParams.get(e)},e.prototype.getNumber=function(e,t){var n=this._searchParams.get(e)||"",r=parseInt(n);return isNaN(r)?t:r},e}(),N=function(){function e(e,t){this._analyticsController=e,this._endpoint=t}return e.prototype.loadMessageBridge=function(e){var n=this;r.default.debug("Adding message bridge into page head."),this._analyticsController.reportEvent(t.PerformingAddMessageBridge);var i="MessageBridgeScript";r.default.debug("Creating script element for Message Bridge as #".concat(i,"."));var a=document.createElement("script");a.src="https://".concat(this._endpoint.assetsHost,"/mobile-sdk/mobile-js-snippet/v1/app.min.js"),a.async=!1,a.addEventListener("load",(function(){r.default.debug("Message bridge added."),n._analyticsController.reportEvent(t.MessageBridgeAdded),e(!0)})),a.addEventListener("error",(function(i){r.default.error("Error adding Message bridge.",i),n._analyticsController.reportEvent(t.MessageBridgeLoadError),n.lookForMessageBridge(e)})),a.id=i,document.head.appendChild(a),this._analyticsController.reportEvent(t.PerformedAddMessageBridge)},e.prototype.lookForMessageBridge=function(e){if(null!=window.__KlarnaNativeHook)e(!0);else{var t=this;window.setTimeout((function(){t.lookForMessageBridge(e)}),500)}},e}(),F=function(){function e(){}return e.getEndpoint=function(t){return t&&a.find(e.endpoints,(function(e){return e.name===t.toLowerCase()}))||e.getDefaultEndpoint()},e.getDefaultEndpoint=function(){return e.endpoints[0]},e.endpoints=[{name:"aws",assetsHost:"x.klarnacdn.net",analyticsHost:"eu.klarnaevt.com"},{name:"azure",assetsHost:"z.klarnacdn.net",analyticsHost:"naz.klarnaevt.com"}],e}();window.addEventListener("load",(function(){var n=new C;r.default.level=n.getNumber("loglevel",e.None),r.default.debug("Page loaded. Initializing HTML wrapper.");var i="debug"===n.getString("environment")?"staging":"production",a=F.getEndpoint(n.getString("endpoint")),o=new l(i,a);o.reportEvent(t.PageLoad),new N(o,a).loadMessageBridge((function(e){e&&function(e,n,i){if(null!=window.__KlarnaNativeHook&&window.__KlarnaNativeHook.inSdkWebView()){r.default.debug("Running in SDK."),e.reportEvent(t.SdkFound);var a=n.getBoolean("mockkp",!1),o=n.getBoolean("storeall",!1),s=n.getString("liburl"),l=n.getString("libversion"),d=n.getString("appversion"),c=new f(a,o,e),u=new m,h=new p(s,l,d,i,e);window.__WrapperMessageController=c,o&&(window.__NativeHookController=u),u.storeAllMessages=o,c.initialize(u,h)}else r.default.debug("Not running in SDK."),e.reportEvent(t.SdkNotFound)}(o,n,a)}))}))})()})();</script></head><body><div id="payment-container"></div></body></html>